<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="synth.js"></script>
  </head>
  <body>
    <script type="text/javascript">
     var context = new AudioContext();
     var loop,
     ch, hh, oh, bd, sn, cp, rm
     ;

     function initLoop() {
       ch = context.createClosehat();
       ch.connect(context.destination);

       hh = context.createHiHat();
       hh.connect(context.destination);

       oh = context.createOpenhat();
       oh.connect(context.destination);

       bd = context.createDrum();
       bd.connect(context.destination);

       sn = context.createSnare();
       sn.connect(context.destination);

       cp = context.createClap();
       cp.connect(context.destination);

       rm = context.createRim();
       rm.connect(context.destination);


       loop = new Loop();

       loop.setInstruments({
         bd:bd,
         sn:sn,
         cp:cp,
         rm:rm,
         ch:ch,
         hh:hh,
         oh:oh,
       });

       loop.setBPM(120);
       loop.setBeatUnit(1 / 16);

       loop.setSequences({ch:'',hh:'',oh:'',sn:'',bd:'',cp:'',rm:''});
       //loop.setSequences({hh:'  *   * ', sn:'    *   ', bd:'*   *   '});
       //loop.setSequences({bd:' *  ', cp:'   *', oh: '', rm: ' *  *  *', hh: ' *   *  ', oh: '      * ' });

       loop.onPlay = function(track, position){ };

       loop.startLoop();
     }

     initLoop();
    </script>
  </body>
</html>
